# scores
execute as @s[type=brr:plate, tag=!ufo, scores={"event building"=5, flood=..380}] at @s run scoreboard players add @s flood 1
scoreboard players add @e[type=brr:plate, scores={"event building"=5}] flood 0
scoreboard players add @e[type=brr:plate, scores={"event building"=5}] "flood button" 0
# flood normal rotation
execute as @s[type=brr:plate, scores={rotation=0, flood=200}] at @s run structure load E19M1a ~-2 ~ ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=220}] at @s run structure load E19M1b ~-2 ~1 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=240}] at @s run structure load E19M1c ~-2 ~2 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=260}] at @s run structure load E19M1d ~-2 ~3 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=280}] at @s run structure load E19M1e ~-2 ~4 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=300}] at @s run structure load E19M1f ~-2 ~5 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=320}] at @s run structure load E19M1g ~-2 ~6 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=340}] at @s run structure load E19M1h ~-2 ~7 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=360}] at @s run structure load E19M1i ~-2 ~8 ~-2 0_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=0, flood=380}] at @s run structure load E19M1j ~-2 ~9 ~-2 0_degrees none block_by_block 1
# flood 90_degrees rotation
execute as @s[type=brr:plate, scores={rotation=1, flood=200}] at @s run structure load E19M1a ~-3 ~ ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=220}] at @s run structure load E19M1b ~-3 ~1 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=240}] at @s run structure load E19M1c ~-3 ~2 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=260}] at @s run structure load E19M1d ~-3 ~3 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=280}] at @s run structure load E19M1e ~-3 ~4 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=300}] at @s run structure load E19M1f ~-3 ~5 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=320}] at @s run structure load E19M1g ~-3 ~6 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=340}] at @s run structure load E19M1h ~-3 ~7 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=360}] at @s run structure load E19M1i ~-3 ~8 ~-2 90_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=1, flood=380}] at @s run structure load E19M1j ~-3 ~9 ~-2 90_degrees none block_by_block 1
# flood 180_degrees rotation
execute as @s[type=brr:plate, scores={rotation=2, flood=200}] at @s run structure load E19M1a ~-2 ~ ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=220}] at @s run structure load E19M1b ~-2 ~1 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=240}] at @s run structure load E19M1c ~-2 ~2 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=260}] at @s run structure load E19M1d ~-2 ~3 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=280}] at @s run structure load E19M1e ~-2 ~4 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=300}] at @s run structure load E19M1f ~-2 ~5 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=320}] at @s run structure load E19M1g ~-2 ~6 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=340}] at @s run structure load E19M1h ~-2 ~7 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=360}] at @s run structure load E19M1i ~-2 ~8 ~-3 180_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=2, flood=380}] at @s run structure load E19M1j ~-2 ~9 ~-3 180_degrees none block_by_block 1
# flood 270_degrees rotation
execute as @s[type=brr:plate, scores={rotation=3, flood=200}] at @s run structure load E19M1a ~-2 ~ ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=220}] at @s run structure load E19M1b ~-2 ~1 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=240}] at @s run structure load E19M1c ~-2 ~2 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=260}] at @s run structure load E19M1d ~-2 ~3 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=280}] at @s run structure load E19M1e ~-2 ~4 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=300}] at @s run structure load E19M1f ~-2 ~5 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=320}] at @s run structure load E19M1g ~-2 ~6 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=340}] at @s run structure load E19M1h ~-2 ~7 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=360}] at @s run structure load E19M1i ~-2 ~8 ~-2 270_degrees none block_by_block 1
execute as @s[type=brr:plate, scores={rotation=3, flood=380}] at @s run structure load E19M1j ~-2 ~9 ~-2 270_degrees none block_by_block 1
# button
execute as @s[type=brr:plate, scores={"event building"=5}] at @s positioned ^-2 ^2 ^-2 if block ~ ~ ~ stone_pressure_plate["redstone_signal"=1] run scoreboard players set @s "flood button switch" 1
execute as @s[type=brr:plate, scores={"flood button switch"=1, "flood button"=..11}] at @s run scoreboard players add @s "flood button" 1
# button animation
execute as @s[type=brr:plate, scores={"flood button"=1}] at @s positioned ^-2 ^2 ^-2 run setblock ~ ~ ~ air
execute as @s[type=brr:plate, scores={"flood button"=1}] at @s positioned ^-1 ^ ^-1 run structure load E19M2a ~ ~ ~
execute as @s[type=brr:plate, scores={"flood button"=10}] at @s positioned ^-1 ^ ^-1 run structure load E19M2b ~ ~ ~
# player
execute as @a[tag=game] at @s if block ~ ~ ~ water run kill @s
execute as @a[tag=game] at @s if block ~ ~ ~ flowing_water run kill @s